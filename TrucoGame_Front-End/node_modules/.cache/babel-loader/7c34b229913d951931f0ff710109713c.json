{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\acapo\\\\Desktop\\\\Programacion Avanzada\\\\Proyecto final - Truco\\\\CardGame_Front-End\\\\src\\\\Game\\\\ListGames.tsx\",\n    _s = $RefreshSig$();\n\nimport request from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getGame, listGames } from \"./gameService\";\nimport { Accordion, Alert, Button, Col, Container, Row } from \"react-bootstrap\";\nimport \"./customAccordion.css\";\nimport { errorHandler } from \"../helpers/errorHandler\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ListGames() {\n  _s();\n\n  const history = useNavigate();\n  const [games, setGames] = useState(undefined);\n  const [requestError, setRequestError] = useState(undefined);\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const fetchData = async () => {\n    try {\n      const res = await listGames();\n      console.log(\"rtaRequest\", res);\n\n      if (res.status != 200) {\n        setRequestError(errorHandler(res));\n      } else {\n        setGames(res.data);\n      }\n    } catch (error) {\n      if (request.isAxiosError(error)) {\n        error;\n        setRequestError(error.message);\n      }\n    }\n  };\n\n  const handleClick = gameNumber => async event => {\n    localStorage.setItem(\"game\", gameNumber);\n\n    try {\n      const res = await getGame(gameNumber);\n\n      if (res.status == 200) {\n        const data = res.data;\n        history('/game', {\n          state: data\n        });\n      } else {\n        let reqError = res.data;\n        setRequestError(reqError.message);\n      }\n    } catch (error) {\n      if (request.isAxiosError(error)) {\n        setRequestError(error.message);\n      }\n    }\n  };\n\n  function checkState(state) {\n    switch (state) {\n      case \"waiting\":\n        return /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"badge\",\n          style: {\n            color: \"#ffff00\"\n          },\n          children: \"Esperando jugadores\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 24\n        }, this);\n\n      case \"started\":\n        return /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"badge\",\n          style: {\n            color: \"#66ff33\"\n          },\n          children: \"Comenzada\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 24\n        }, this);\n\n      default:\n        return /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"badge\",\n          style: {\n            color: \"#dc3545\"\n          },\n          children: \"Terminada\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 24\n        }, this);\n    }\n  }\n\n  function createList(gameList) {\n    console.log(\"games\", gameList);\n\n    if (gameList.games.length == 0) {\n      return /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-white\",\n        children: \"No tiene ninguna partida en curso\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this);\n    }\n\n    let list;\n    list = gameList.games.map((item, index) => {\n      let date = new Date(item.created_at);\n      return /*#__PURE__*/_jsxDEV(Accordion.Item, {\n        eventKey: index.toString(10),\n        children: [/*#__PURE__*/_jsxDEV(Accordion.Header, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: \"auto\",\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-sm-start\",\n              children: item.number\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: \"auto\",\n            children: checkState(item.state)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Accordion.Body, {\n          className: \"bg-dark\",\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              className: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-white\",\n                children: [\"Tama\\xF1o: \", item.size, \" jugadores\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-white\",\n                children: [\"Puntaje: \", item.points_us, \" - \", item.points_them]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-white\",\n                children: [\"Fecha de Creacion: \", date.toLocaleDateString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: handleClick(item.number),\n                children: \"Reanudar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this);\n    });\n    return list;\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mt-5 pt-5\",\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      className: \"pt-3 px-4 py-4 bg-dark\",\n      children: [requestError != undefined && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        children: requestError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Accordion, {\n        flush: true,\n        className: \"bg-dark my-4 mx-4\",\n        children: games === undefined ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : createList(games)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ListGames, \"cRrHqpPmcFdnn0ZbnNXy/SrZDWM=\", false, function () {\n  return [useNavigate];\n});\n\n_c = ListGames;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListGames\");","map":{"version":3,"names":["request","useEffect","useState","useNavigate","getGame","listGames","Accordion","Alert","Button","Col","Container","Row","errorHandler","ListGames","history","games","setGames","undefined","requestError","setRequestError","fetchData","res","console","log","status","data","error","isAxiosError","message","handleClick","gameNumber","event","localStorage","setItem","state","reqError","checkState","color","createList","gameList","length","list","map","item","index","date","Date","created_at","toString","number","size","points_us","points_them","toLocaleDateString"],"sources":["C:/Users/acapo/Desktop/Programacion Avanzada/Proyecto final - Truco/CardGame_Front-End/src/Game/ListGames.tsx"],"sourcesContent":["import { AxiosError } from \"axios\";\r\nimport request from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { GameData, GameSummary, getGame, listGames } from \"./gameService\";\r\nimport { RequestError } from \"../User/userService\"\r\nimport { Accordion, Alert, Button, Col, Container, Row } from \"react-bootstrap\";\r\nimport \"./customAccordion.css\"\r\nimport { errorHandler } from \"../helpers/errorHandler\";\r\n\r\nexport default function ListGames() {\r\n    const history = useNavigate()\r\n    const [games, setGames] = useState<GameSummary | undefined>(undefined)\r\n    const [requestError, setRequestError] = useState<string | undefined>(undefined)\r\n\r\n    useEffect(() => {\r\n        fetchData()\r\n    }, []);\r\n\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const res = await listGames()\r\n            console.log(\"rtaRequest\", res)\r\n            if (res.status != 200) {\r\n                setRequestError(errorHandler(res))\r\n            } else {\r\n                setGames(res.data as GameSummary)\r\n            }\r\n        } catch (error) {\r\n            if (request.isAxiosError(error)) {\r\n                error as AxiosError\r\n                setRequestError(error.message)\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleClick = (gameNumber: string) => async (event: any) => {\r\n        localStorage.setItem(\"game\", gameNumber)\r\n        try {\r\n\r\n            const res = await getGame(gameNumber)\r\n            if (res.status == 200) {\r\n                const data = res.data as GameData\r\n                history('/game', { state: data })\r\n            } else {\r\n                let reqError = res.data as RequestError\r\n                setRequestError(reqError.message)\r\n            }\r\n        } catch (error) {\r\n            if (request.isAxiosError(error)) {\r\n                setRequestError(error.message)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    function checkState(state: string){\r\n        switch(state){\r\n            case \"waiting\":\r\n                return <h5 className=\"badge\" style={{ color: \"#ffff00\" }}>Esperando jugadores</h5>\r\n            case \"started\":\r\n                return <h5 className=\"badge\" style={{ color: \"#66ff33\" }}>Comenzada</h5>\r\n            default:\r\n                return <h5 className=\"badge\" style={{ color: \"#dc3545\" }}>Terminada</h5>\r\n        }\r\n    }\r\n\r\n    function createList(gameList: GameSummary) {\r\n        console.log(\"games\", gameList)\r\n        if (gameList.games.length == 0) {\r\n            return (\r\n                <h2 className=\"text-white\">No tiene ninguna partida en curso</h2>\r\n            )\r\n        }\r\n        let list\r\n        list = gameList.games.map((item, index) => {\r\n            let date = new Date(item.created_at)\r\n            return (\r\n                <Accordion.Item eventKey={index.toString(10)} >\r\n                    <Accordion.Header >                        \r\n                        <Col xs=\"auto\">\r\n                            <h3 className=\"text-sm-start\">{item.number}</h3>\r\n                        </Col>\r\n                        <Col xs=\"auto\">\r\n                            {checkState(item.state)}\r\n                        </Col>                        \r\n                    </Accordion.Header>\r\n                    <Accordion.Body className=\"bg-dark\">\r\n                        <Row>\r\n                            <Col className=\"\">\r\n                                <h4 className=\"text-white\">Tama√±o: {item.size} jugadores</h4>\r\n                                <h4 className=\"text-white\">Puntaje: {item.points_us} - {item.points_them}</h4>\r\n                            </Col>\r\n                            <Col>\r\n                                <h4 className=\"text-white\">Fecha de Creacion: {date.toLocaleDateString()}</h4>\r\n                                <Button onClick={handleClick(item.number)}>Reanudar</Button>\r\n                            </Col>\r\n                        </Row>\r\n                    </Accordion.Body>\r\n                </Accordion.Item>)\r\n        })\r\n        return list\r\n    }\r\n    return (\r\n        <Container className=\"mt-5 pt-5\">\r\n            <Container className=\"pt-3 px-4 py-4 bg-dark\">\r\n                {requestError != undefined && (\r\n                    <Alert variant=\"danger\">\r\n                        {requestError}\r\n                    </Alert>\r\n                )}\r\n                <Accordion flush className=\"bg-dark my-4 mx-4\">\r\n                    {games === undefined ? <></> : createList(games)}\r\n                </Accordion>\r\n            </Container>\r\n        </Container>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}