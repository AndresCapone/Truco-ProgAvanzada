{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useLayoutEffect, useState } from \"react\";\nimport { Subject } from \"rxjs\";\nconst tokenSubject = new Subject();\nlet currentToken; //como se define fuera es de alcance global, solo existe una que va mutando\n\nexport function useSessionToken() {\n  _s();\n\n  //Defino un hook que observa al estado del token \n  const [token, setToken] = useState(currentToken);\n  useLayoutEffect(() => {\n    tokenSubject.subscribe(newToken => {\n      setToken(newToken);\n    });\n  }, []);\n  return token;\n}\n\n_s(useSessionToken, \"nDPPLQ1jQbXohWiG5TsVRvCnVzw=\");\n\nexport function updateSessionToken(token) {\n  currentToken = token;\n  tokenSubject.next(currentToken);\n  localStorage.setItem(\"token\", token);\n}\nexport function cleanSessionToken() {\n  currentToken = undefined;\n  tokenSubject.next(currentToken);\n  localStorage.removeItem(\"token\");\n}\nconst userSubject = new Subject();\nlet currentUser;\nexport function useSessionUser() {\n  _s2();\n\n  const [user, setUser] = useState(currentUser);\n  useLayoutEffect(() => {\n    userSubject.subscribe(newUser => {\n      setUser(newUser);\n    });\n  }, []);\n  return user;\n}\n\n_s2(useSessionUser, \"MrJcBFTpGPkKf6RO26JNotrGsNM=\");\n\nexport function updateSessionUser(user) {\n  currentUser = user;\n  userSubject.next(currentUser);\n  localStorage.setItem(\"user\", JSON.stringify(user));\n  console.log(\"updatedUser\", user);\n}\nexport function cleanSessionUser() {\n  currentUser = undefined;\n  userSubject.next(currentUser);\n  localStorage.removeItem(\"user\");\n}","map":{"version":3,"names":["useLayoutEffect","useState","Subject","tokenSubject","currentToken","useSessionToken","token","setToken","subscribe","newToken","updateSessionToken","next","localStorage","setItem","cleanSessionToken","undefined","removeItem","userSubject","currentUser","useSessionUser","user","setUser","newUser","updateSessionUser","JSON","stringify","console","log","cleanSessionUser"],"sources":["C:/Users/acapo/Desktop/Programacion Avanzada/Proyecto final - Truco/CardGame_Front-End/src/User/userStore.ts"],"sourcesContent":["import axios from \"axios\"\r\nimport { useLayoutEffect, useState } from \"react\"\r\nimport { Subject } from \"rxjs\"\r\nimport { User } from \"./userService\"\r\n\r\nconst tokenSubject = new Subject<string | undefined>() \r\n\r\nlet currentToken: string | undefined //como se define fuera es de alcance global, solo existe una que va mutando\r\n\r\nexport function useSessionToken(): string | undefined {  //Defino un hook que observa al estado del token \r\n    const [token,setToken] = useState(currentToken)    \r\n    useLayoutEffect(()=> {\r\n        tokenSubject.subscribe( (newToken) => {\r\n            setToken(newToken)\r\n        })\r\n    }, [])\r\n    return token\r\n}\r\n\r\n\r\nexport function updateSessionToken(token: string){\r\n    currentToken = token\r\n    tokenSubject.next(currentToken)\r\n    localStorage.setItem(\"token\", token)    \r\n}\r\n\r\nexport function cleanSessionToken(){\r\n    currentToken = undefined\r\n    tokenSubject.next(currentToken)\r\n    localStorage.removeItem(\"token\")    \r\n}\r\n\r\nconst userSubject = new Subject<User | undefined>() \r\n\r\nlet currentUser: User | undefined \r\n\r\nexport function useSessionUser(): User | undefined {  \r\n    const [user,setUser] = useState(currentUser)    \r\n    useLayoutEffect(()=> {\r\n        userSubject.subscribe( (newUser) => {\r\n            setUser(newUser)\r\n        })\r\n    }, [])\r\n    return user\r\n}\r\n\r\n\r\nexport function updateSessionUser(user: User){\r\n    currentUser = user\r\n    userSubject.next(currentUser)\r\n    localStorage.setItem(\"user\", JSON.stringify(user))\r\n    console.log(\"updatedUser\",user)\r\n}\r\n\r\nexport function cleanSessionUser(){\r\n    currentUser = undefined\r\n    userSubject.next(currentUser)     \r\n    localStorage.removeItem(\"user\")    \r\n}\r\n"],"mappings":";;;AACA,SAASA,eAAT,EAA0BC,QAA1B,QAA0C,OAA1C;AACA,SAASC,OAAT,QAAwB,MAAxB;AAGA,MAAMC,YAAY,GAAG,IAAID,OAAJ,EAArB;AAEA,IAAIE,YAAJ,C,CAAqC;;AAErC,OAAO,SAASC,eAAT,GAA+C;EAAA;;EAAG;EACrD,MAAM,CAACC,KAAD,EAAOC,QAAP,IAAmBN,QAAQ,CAACG,YAAD,CAAjC;EACAJ,eAAe,CAAC,MAAK;IACjBG,YAAY,CAACK,SAAb,CAAyBC,QAAD,IAAc;MAClCF,QAAQ,CAACE,QAAD,CAAR;IACH,CAFD;EAGH,CAJc,EAIZ,EAJY,CAAf;EAKA,OAAOH,KAAP;AACH;;GAReD,e;;AAWhB,OAAO,SAASK,kBAAT,CAA4BJ,KAA5B,EAA0C;EAC7CF,YAAY,GAAGE,KAAf;EACAH,YAAY,CAACQ,IAAb,CAAkBP,YAAlB;EACAQ,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BP,KAA9B;AACH;AAED,OAAO,SAASQ,iBAAT,GAA4B;EAC/BV,YAAY,GAAGW,SAAf;EACAZ,YAAY,CAACQ,IAAb,CAAkBP,YAAlB;EACAQ,YAAY,CAACI,UAAb,CAAwB,OAAxB;AACH;AAED,MAAMC,WAAW,GAAG,IAAIf,OAAJ,EAApB;AAEA,IAAIgB,WAAJ;AAEA,OAAO,SAASC,cAAT,GAA4C;EAAA;;EAC/C,MAAM,CAACC,IAAD,EAAMC,OAAN,IAAiBpB,QAAQ,CAACiB,WAAD,CAA/B;EACAlB,eAAe,CAAC,MAAK;IACjBiB,WAAW,CAACT,SAAZ,CAAwBc,OAAD,IAAa;MAChCD,OAAO,CAACC,OAAD,CAAP;IACH,CAFD;EAGH,CAJc,EAIZ,EAJY,CAAf;EAKA,OAAOF,IAAP;AACH;;IAReD,c;;AAWhB,OAAO,SAASI,iBAAT,CAA2BH,IAA3B,EAAsC;EACzCF,WAAW,GAAGE,IAAd;EACAH,WAAW,CAACN,IAAZ,CAAiBO,WAAjB;EACAN,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BW,IAAI,CAACC,SAAL,CAAeL,IAAf,CAA7B;EACAM,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BP,IAA1B;AACH;AAED,OAAO,SAASQ,gBAAT,GAA2B;EAC9BV,WAAW,GAAGH,SAAd;EACAE,WAAW,CAACN,IAAZ,CAAiBO,WAAjB;EACAN,YAAY,CAACI,UAAb,CAAwB,MAAxB;AACH"},"metadata":{},"sourceType":"module"}