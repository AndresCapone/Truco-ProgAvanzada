{"ast":null,"code":"import axios from \"axios\";\nexport async function createGame(size) {\n  const res = (await axios.post(\"/games\", {\n    size: size\n  })).data;\n\n  if (res.status == 200) {\n    localStorage.setItem(\"game\", res.data.game.number);\n  }\n\n  return res;\n}\nexport async function endGame(number) {\n  const res = (await axios.post(\"/game/end\", {\n    number: number\n  })).data;\n\n  if (res.status == 200) {\n    localStorage.removeItem(\"game\");\n  }\n\n  return res;\n}\nexport async function getGame(number) {\n  const res = (await axios.get(\"/game/status\", {\n    params: {\n      number: number\n    }\n  })).data;\n\n  if (res.status == 200) {//store game\n  }\n\n  return res;\n}\nexport async function joinGame(number, team) {\n  const res = (await axios.post(\"/game/join\", {\n    number: number,\n    team: team\n  })).data;\n\n  if (res.status == 200) {\n    localStorage.setItem(\"game\", res.data.game.number);\n  }\n\n  return res;\n}\nexport async function listGames() {\n  const res = (await axios.get(\"/games\")).data;\n  return res;\n}\nexport async function playCard(number, card) {\n  const res = (await axios.post(\"/game/play\", {\n    number: number,\n    card: card\n  })).data;\n  return res;\n}\nexport async function discard(number, card) {\n  const res = (await axios.post(\"/game/discard\", {\n    number: number,\n    card: card\n  })).data;\n  return res;\n}\nexport async function deal(number) {\n  const res = (await axios.post(\"/game/deal\", {\n    number: number\n  })).data;\n  return res;\n}\nexport async function addPoint(number, team) {\n  const res = (await axios.post(\"/game/add_point\", {\n    number: number,\n    team: team\n  })).data;\n  return res;\n}\nexport async function removePoint(number, team) {\n  const res = (await axios.post(\"/game/remove_point\", {\n    number: number,\n    team: team\n  })).data;\n  return res;\n}","map":{"version":3,"names":["axios","createGame","size","res","post","data","status","localStorage","setItem","game","number","endGame","removeItem","getGame","get","params","joinGame","team","listGames","playCard","card","discard","deal","addPoint","removePoint"],"sources":["C:/Users/acapo/Desktop/Programacion Avanzada/Proyecto final - Truco/CardGame_Front-End/src/Game/gameService.ts"],"sourcesContent":["import axios from \"axios\"\r\nimport { getCurrentToken, RequestError, UserData } from \"../User/userService\"\r\n\r\n//axios.defaults.headers.common['Authorization'] = getCurrentToken()\r\n\r\nexport interface Data {\r\n  status: number,\r\n  data: GameData | RequestError | GameSummary | UserData\r\n}\r\n\r\nexport interface GameData {\r\n  hand: string[],\r\n  game: Game\r\n}\r\n\r\nexport interface Game {\r\n  points_us: number,\r\n  points_them: number,\r\n  players_count: number,\r\n  size: number,\r\n  state: string,\r\n  number: string,\r\n  deals: number,\r\n  created_at: Date,\r\n  players: Player[]\r\n}\r\n\r\nexport interface Player {\r\n  role: string,\r\n  team: string,\r\n  played: string[],\r\n  seat: number,\r\n  user: { username: string }\r\n}\r\n\r\nexport interface GameSummary{\r\n  games: {\r\n    points_us: number,\r\n    points_them: number,    \r\n    state: string,\r\n    number: string,  \r\n    created_at: Date,\r\n    size: number\r\n  }[]\r\n  \r\n}\r\n\r\nexport async function createGame(size: number): Promise<Data> {\r\n  const res = (\r\n    await axios.post(\"/games\", { size: size })\r\n  ).data as Data\r\n  if (res.status == 200) {\r\n    localStorage.setItem(\"game\", (<GameData>res.data).game.number)\r\n  }\r\n  return res\r\n}\r\n\r\nexport async function endGame(number:string){\r\n  const res = (\r\n    await axios.post(\"/game/end\", {number: number})\r\n  ).data as Data  \r\n  if (res.status == 200) {\r\n    localStorage.removeItem(\"game\")\r\n  }\r\n  return res\r\n}\r\n\r\nexport async function getGame(number: string): Promise<Data> {\r\n  const res = (\r\n    await axios.get(\"/game/status\", { params: { number: number } })\r\n  ).data as Data\r\n  if (res.status == 200) {\r\n    //store game\r\n  }\r\n  return res\r\n}\r\n\r\nexport async function joinGame(number: string, team: string): Promise<Data> {\r\n  const res = (\r\n    await axios.post(\"/game/join\", { number: number, team: team })\r\n  ).data as Data\r\n  if (res.status == 200) {\r\n    localStorage.setItem(\"game\", (<GameData>res.data).game.number)\r\n  }\r\n  return res\r\n}\r\n\r\nexport async function listGames(): Promise<Data> {\r\n  const res = (\r\n    await axios.get(\"/games\")\r\n  ).data as Data  \r\n  return res\r\n}\r\n\r\nexport async function playCard(number: string, card: string): Promise<Data> {\r\n  const res = (\r\n    await axios.post(\"/game/play\",{number: number, card: card})\r\n  ).data as Data\r\n  return res\r\n}\r\n\r\nexport async function discard(number: string, card: string): Promise<Data> {\r\n  const res = (\r\n    await axios.post(\"/game/discard\",{number: number, card: card})\r\n  ).data as Data\r\n  return res\r\n}\r\n\r\nexport async function deal(number: string): Promise<Data> {\r\n  const res = (\r\n    await axios.post(\"/game/deal\",{number: number})\r\n  ).data as Data\r\n  return res\r\n}\r\n\r\nexport async function addPoint(number: string,team: string): Promise<Data> {\r\n  const res = (\r\n    await axios.post(\"/game/add_point\",{number: number,team: team})\r\n  ).data as Data\r\n  return res\r\n}\r\n\r\nexport async function removePoint(number: string,team: string): Promise<Data> {\r\n  const res = (\r\n    await axios.post(\"/game/remove_point\",{number: number,team: team})\r\n  ).data as Data\r\n  return res\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}