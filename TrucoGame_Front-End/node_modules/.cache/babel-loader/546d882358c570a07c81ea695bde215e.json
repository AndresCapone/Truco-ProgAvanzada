{"ast":null,"code":"(function (global, factory) {\n  typeof exports === \"object\" && typeof module !== \"undefined\" ? factory(exports) : typeof define === \"function\" && define.amd ? define([\"exports\"], factory) : factory(global.ActiveStorage = {});\n})(this, function (exports) {\n  \"use strict\";\n\n  function createCommonjsModule(fn, module) {\n    return module = {\n      exports: {}\n    }, fn(module, module.exports), module.exports;\n  }\n\n  var sparkMd5 = createCommonjsModule(function (module, exports) {\n    (function (factory) {\n      {\n        module.exports = factory();\n      }\n    })(function (undefined) {\n      var hex_chr = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\n\n      function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n      }\n\n      function md5blk(s) {\n        var md5blks = [],\n            i;\n\n        for (i = 0; i < 64; i += 4) {\n          md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n\n        return md5blks;\n      }\n\n      function md5blk_array(a) {\n        var md5blks = [],\n            i;\n\n        for (i = 0; i < 64; i += 4) {\n          md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n\n        return md5blks;\n      }\n\n      function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n          md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= s.charCodeAt(i) << (i % 4 << 3);\n        }\n\n        tail[i >> 2] |= 128 << (i % 4 << 3);\n\n        if (i > 55) {\n          md5cycle(state, tail);\n\n          for (i = 0; i < 16; i += 1) {\n            tail[i] = 0;\n          }\n        }\n\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(state, tail);\n        return state;\n      }\n\n      function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n          md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        a = i - 64 < n ? a.subarray(i - 64) : new Uint8Array(0);\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= a[i] << (i % 4 << 3);\n        }\n\n        tail[i >> 2] |= 128 << (i % 4 << 3);\n\n        if (i > 55) {\n          md5cycle(state, tail);\n\n          for (i = 0; i < 16; i += 1) {\n            tail[i] = 0;\n          }\n        }\n\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(state, tail);\n        return state;\n      }\n\n      function rhex(n) {\n        var s = \"\",\n            j;\n\n        for (j = 0; j < 4; j += 1) {\n          s += hex_chr[n >> j * 8 + 4 & 15] + hex_chr[n >> j * 8 & 15];\n        }\n\n        return s;\n      }\n\n      function hex(x) {\n        var i;\n\n        for (i = 0; i < x.length; i += 1) {\n          x[i] = rhex(x[i]);\n        }\n\n        return x.join(\"\");\n      }\n\n      if (hex(md51(\"hello\")) !== \"5d41402abc4b2a76b9719d911017c592\") ;\n\n      if (typeof ArrayBuffer !== \"undefined\" && !ArrayBuffer.prototype.slice) {\n        (function () {\n          function clamp(val, length) {\n            val = val | 0 || 0;\n\n            if (val < 0) {\n              return Math.max(val + length, 0);\n            }\n\n            return Math.min(val, length);\n          }\n\n          ArrayBuffer.prototype.slice = function (from, to) {\n            var length = this.byteLength,\n                begin = clamp(from, length),\n                end = length,\n                num,\n                target,\n                targetArray,\n                sourceArray;\n\n            if (to !== undefined) {\n              end = clamp(to, length);\n            }\n\n            if (begin > end) {\n              return new ArrayBuffer(0);\n            }\n\n            num = end - begin;\n            target = new ArrayBuffer(num);\n            targetArray = new Uint8Array(target);\n            sourceArray = new Uint8Array(this, begin, num);\n            targetArray.set(sourceArray);\n            return target;\n          };\n        })();\n      }\n\n      function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n          str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n      }\n\n      function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n            buff = new ArrayBuffer(length),\n            arr = new Uint8Array(buff),\n            i;\n\n        for (i = 0; i < length; i += 1) {\n          arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n      }\n\n      function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n      }\n\n      function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n        return returnUInt8Array ? result : result.buffer;\n      }\n\n      function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n          bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n      }\n\n      function SparkMD5() {\n        this.reset();\n      }\n\n      SparkMD5.prototype.append = function (str) {\n        this.appendBinary(toUtf8(str));\n        return this;\n      };\n\n      SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n          md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n        return this;\n      };\n\n      SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= buff.charCodeAt(i) << (i % 4 << 3);\n        }\n\n        this._finish(tail, length);\n\n        ret = hex(this._hash);\n\n        if (raw) {\n          ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n        return ret;\n      };\n\n      SparkMD5.prototype.reset = function () {\n        this._buff = \"\";\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n        return this;\n      };\n\n      SparkMD5.prototype.getState = function () {\n        return {\n          buff: this._buff,\n          length: this._length,\n          hash: this._hash\n        };\n      };\n\n      SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n        return this;\n      };\n\n      SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n      };\n\n      SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n        tail[i >> 2] |= 128 << (i % 4 << 3);\n\n        if (i > 55) {\n          md5cycle(this._hash, tail);\n\n          for (i = 0; i < 16; i += 1) {\n            tail[i] = 0;\n          }\n        }\n\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n      };\n\n      SparkMD5.hash = function (str, raw) {\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n      };\n\n      SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n        return raw ? hexToBinaryString(ret) : ret;\n      };\n\n      SparkMD5.ArrayBuffer = function () {\n        this.reset();\n      };\n\n      SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n          md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = i - 64 < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n        return this;\n      };\n\n      SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= buff[i] << (i % 4 << 3);\n        }\n\n        this._finish(tail, length);\n\n        ret = hex(this._hash);\n\n        if (raw) {\n          ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n        return ret;\n      };\n\n      SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n        return this;\n      };\n\n      SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n        return state;\n      };\n\n      SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n        return SparkMD5.prototype.setState.call(this, state);\n      };\n\n      SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n      SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n      SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n        return raw ? hexToBinaryString(ret) : ret;\n      };\n\n      return SparkMD5;\n    });\n  });\n\n  var classCallCheck = function (instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n\n  var createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var fileSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice;\n\n  var FileChecksum = function () {\n    createClass(FileChecksum, null, [{\n      key: \"create\",\n      value: function create(file, callback) {\n        var instance = new FileChecksum(file);\n        instance.create(callback);\n      }\n    }]);\n\n    function FileChecksum(file) {\n      classCallCheck(this, FileChecksum);\n      this.file = file;\n      this.chunkSize = 2097152;\n      this.chunkCount = Math.ceil(this.file.size / this.chunkSize);\n      this.chunkIndex = 0;\n    }\n\n    createClass(FileChecksum, [{\n      key: \"create\",\n      value: function create(callback) {\n        var _this = this;\n\n        this.callback = callback;\n        this.md5Buffer = new sparkMd5.ArrayBuffer();\n        this.fileReader = new FileReader();\n        this.fileReader.addEventListener(\"load\", function (event) {\n          return _this.fileReaderDidLoad(event);\n        });\n        this.fileReader.addEventListener(\"error\", function (event) {\n          return _this.fileReaderDidError(event);\n        });\n        this.readNextChunk();\n      }\n    }, {\n      key: \"fileReaderDidLoad\",\n      value: function fileReaderDidLoad(event) {\n        this.md5Buffer.append(event.target.result);\n\n        if (!this.readNextChunk()) {\n          var binaryDigest = this.md5Buffer.end(true);\n          var base64digest = btoa(binaryDigest);\n          this.callback(null, base64digest);\n        }\n      }\n    }, {\n      key: \"fileReaderDidError\",\n      value: function fileReaderDidError(event) {\n        this.callback(\"Error reading \" + this.file.name);\n      }\n    }, {\n      key: \"readNextChunk\",\n      value: function readNextChunk() {\n        if (this.chunkIndex < this.chunkCount || this.chunkIndex == 0 && this.chunkCount == 0) {\n          var start = this.chunkIndex * this.chunkSize;\n          var end = Math.min(start + this.chunkSize, this.file.size);\n          var bytes = fileSlice.call(this.file, start, end);\n          this.fileReader.readAsArrayBuffer(bytes);\n          this.chunkIndex++;\n          return true;\n        } else {\n          return false;\n        }\n      }\n    }]);\n    return FileChecksum;\n  }();\n\n  function getMetaValue(name) {\n    var element = findElement(document.head, 'meta[name=\"' + name + '\"]');\n\n    if (element) {\n      return element.getAttribute(\"content\");\n    }\n  }\n\n  function findElements(root, selector) {\n    if (typeof root == \"string\") {\n      selector = root;\n      root = document;\n    }\n\n    var elements = root.querySelectorAll(selector);\n    return toArray$1(elements);\n  }\n\n  function findElement(root, selector) {\n    if (typeof root == \"string\") {\n      selector = root;\n      root = document;\n    }\n\n    return root.querySelector(selector);\n  }\n\n  function dispatchEvent(element, type) {\n    var eventInit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var disabled = element.disabled;\n    var bubbles = eventInit.bubbles,\n        cancelable = eventInit.cancelable,\n        detail = eventInit.detail;\n    var event = document.createEvent(\"Event\");\n    event.initEvent(type, bubbles || true, cancelable || true);\n    event.detail = detail || {};\n\n    try {\n      element.disabled = false;\n      element.dispatchEvent(event);\n    } finally {\n      element.disabled = disabled;\n    }\n\n    return event;\n  }\n\n  function toArray$1(value) {\n    if (Array.isArray(value)) {\n      return value;\n    } else if (Array.from) {\n      return Array.from(value);\n    } else {\n      return [].slice.call(value);\n    }\n  }\n\n  var BlobRecord = function () {\n    function BlobRecord(file, checksum, url) {\n      var _this = this;\n\n      classCallCheck(this, BlobRecord);\n      this.file = file;\n      this.attributes = {\n        filename: file.name,\n        content_type: file.type,\n        byte_size: file.size,\n        checksum: checksum\n      };\n      this.xhr = new XMLHttpRequest();\n      this.xhr.open(\"POST\", url, true);\n      this.xhr.responseType = \"json\";\n      this.xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n      this.xhr.setRequestHeader(\"Accept\", \"application/json\");\n      this.xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n      this.xhr.setRequestHeader(\"X-CSRF-Token\", getMetaValue(\"csrf-token\"));\n      this.xhr.addEventListener(\"load\", function (event) {\n        return _this.requestDidLoad(event);\n      });\n      this.xhr.addEventListener(\"error\", function (event) {\n        return _this.requestDidError(event);\n      });\n    }\n\n    createClass(BlobRecord, [{\n      key: \"create\",\n      value: function create(callback) {\n        this.callback = callback;\n        this.xhr.send(JSON.stringify({\n          blob: this.attributes\n        }));\n      }\n    }, {\n      key: \"requestDidLoad\",\n      value: function requestDidLoad(event) {\n        if (this.status >= 200 && this.status < 300) {\n          var response = this.response;\n          var direct_upload = response.direct_upload;\n          delete response.direct_upload;\n          this.attributes = response;\n          this.directUploadData = direct_upload;\n          this.callback(null, this.toJSON());\n        } else {\n          this.requestDidError(event);\n        }\n      }\n    }, {\n      key: \"requestDidError\",\n      value: function requestDidError(event) {\n        this.callback('Error creating Blob for \"' + this.file.name + '\". Status: ' + this.status);\n      }\n    }, {\n      key: \"toJSON\",\n      value: function toJSON() {\n        var result = {};\n\n        for (var key in this.attributes) {\n          result[key] = this.attributes[key];\n        }\n\n        return result;\n      }\n    }, {\n      key: \"status\",\n      get: function get$$1() {\n        return this.xhr.status;\n      }\n    }, {\n      key: \"response\",\n      get: function get$$1() {\n        var _xhr = this.xhr,\n            responseType = _xhr.responseType,\n            response = _xhr.response;\n\n        if (responseType == \"json\") {\n          return response;\n        } else {\n          return JSON.parse(response);\n        }\n      }\n    }]);\n    return BlobRecord;\n  }();\n\n  var BlobUpload = function () {\n    function BlobUpload(blob) {\n      var _this = this;\n\n      classCallCheck(this, BlobUpload);\n      this.blob = blob;\n      this.file = blob.file;\n      var _blob$directUploadDat = blob.directUploadData,\n          url = _blob$directUploadDat.url,\n          headers = _blob$directUploadDat.headers;\n      this.xhr = new XMLHttpRequest();\n      this.xhr.open(\"PUT\", url, true);\n      this.xhr.responseType = \"text\";\n\n      for (var key in headers) {\n        this.xhr.setRequestHeader(key, headers[key]);\n      }\n\n      this.xhr.addEventListener(\"load\", function (event) {\n        return _this.requestDidLoad(event);\n      });\n      this.xhr.addEventListener(\"error\", function (event) {\n        return _this.requestDidError(event);\n      });\n    }\n\n    createClass(BlobUpload, [{\n      key: \"create\",\n      value: function create(callback) {\n        this.callback = callback;\n        this.xhr.send(this.file.slice());\n      }\n    }, {\n      key: \"requestDidLoad\",\n      value: function requestDidLoad(event) {\n        var _xhr = this.xhr,\n            status = _xhr.status,\n            response = _xhr.response;\n\n        if (status >= 200 && status < 300) {\n          this.callback(null, response);\n        } else {\n          this.requestDidError(event);\n        }\n      }\n    }, {\n      key: \"requestDidError\",\n      value: function requestDidError(event) {\n        this.callback('Error storing \"' + this.file.name + '\". Status: ' + this.xhr.status);\n      }\n    }]);\n    return BlobUpload;\n  }();\n\n  var id = 0;\n\n  var DirectUpload = function () {\n    function DirectUpload(file, url, delegate) {\n      classCallCheck(this, DirectUpload);\n      this.id = ++id;\n      this.file = file;\n      this.url = url;\n      this.delegate = delegate;\n    }\n\n    createClass(DirectUpload, [{\n      key: \"create\",\n      value: function create(callback) {\n        var _this = this;\n\n        FileChecksum.create(this.file, function (error, checksum) {\n          if (error) {\n            callback(error);\n            return;\n          }\n\n          var blob = new BlobRecord(_this.file, checksum, _this.url);\n          notify(_this.delegate, \"directUploadWillCreateBlobWithXHR\", blob.xhr);\n          blob.create(function (error) {\n            if (error) {\n              callback(error);\n            } else {\n              var upload = new BlobUpload(blob);\n              notify(_this.delegate, \"directUploadWillStoreFileWithXHR\", upload.xhr);\n              upload.create(function (error) {\n                if (error) {\n                  callback(error);\n                } else {\n                  callback(null, blob.toJSON());\n                }\n              });\n            }\n          });\n        });\n      }\n    }]);\n    return DirectUpload;\n  }();\n\n  function notify(object, methodName) {\n    if (object && typeof object[methodName] == \"function\") {\n      for (var _len = arguments.length, messages = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        messages[_key - 2] = arguments[_key];\n      }\n\n      return object[methodName].apply(object, messages);\n    }\n  }\n\n  var DirectUploadController = function () {\n    function DirectUploadController(input, file) {\n      classCallCheck(this, DirectUploadController);\n      this.input = input;\n      this.file = file;\n      this.directUpload = new DirectUpload(this.file, this.url, this);\n      this.dispatch(\"initialize\");\n    }\n\n    createClass(DirectUploadController, [{\n      key: \"start\",\n      value: function start(callback) {\n        var _this = this;\n\n        var hiddenInput = document.createElement(\"input\");\n        hiddenInput.type = \"hidden\";\n        hiddenInput.name = this.input.name;\n        this.input.insertAdjacentElement(\"beforebegin\", hiddenInput);\n        this.dispatch(\"start\");\n        this.directUpload.create(function (error, attributes) {\n          if (error) {\n            hiddenInput.parentNode.removeChild(hiddenInput);\n\n            _this.dispatchError(error);\n          } else {\n            hiddenInput.value = attributes.signed_id;\n          }\n\n          _this.dispatch(\"end\");\n\n          callback(error);\n        });\n      }\n    }, {\n      key: \"uploadRequestDidProgress\",\n      value: function uploadRequestDidProgress(event) {\n        var progress = event.loaded / event.total * 100;\n\n        if (progress) {\n          this.dispatch(\"progress\", {\n            progress: progress\n          });\n        }\n      }\n    }, {\n      key: \"dispatch\",\n      value: function dispatch(name) {\n        var detail = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        detail.file = this.file;\n        detail.id = this.directUpload.id;\n        return dispatchEvent(this.input, \"direct-upload:\" + name, {\n          detail: detail\n        });\n      }\n    }, {\n      key: \"dispatchError\",\n      value: function dispatchError(error) {\n        var event = this.dispatch(\"error\", {\n          error: error\n        });\n\n        if (!event.defaultPrevented) {\n          alert(error);\n        }\n      }\n    }, {\n      key: \"directUploadWillCreateBlobWithXHR\",\n      value: function directUploadWillCreateBlobWithXHR(xhr) {\n        this.dispatch(\"before-blob-request\", {\n          xhr: xhr\n        });\n      }\n    }, {\n      key: \"directUploadWillStoreFileWithXHR\",\n      value: function directUploadWillStoreFileWithXHR(xhr) {\n        var _this2 = this;\n\n        this.dispatch(\"before-storage-request\", {\n          xhr: xhr\n        });\n        xhr.upload.addEventListener(\"progress\", function (event) {\n          return _this2.uploadRequestDidProgress(event);\n        });\n      }\n    }, {\n      key: \"url\",\n      get: function get$$1() {\n        return this.input.getAttribute(\"data-direct-upload-url\");\n      }\n    }]);\n    return DirectUploadController;\n  }();\n\n  var inputSelector = \"input[type=file][data-direct-upload-url]:not([disabled])\";\n\n  var DirectUploadsController = function () {\n    function DirectUploadsController(form) {\n      classCallCheck(this, DirectUploadsController);\n      this.form = form;\n      this.inputs = findElements(form, inputSelector).filter(function (input) {\n        return input.files.length;\n      });\n    }\n\n    createClass(DirectUploadsController, [{\n      key: \"start\",\n      value: function start(callback) {\n        var _this = this;\n\n        var controllers = this.createDirectUploadControllers();\n\n        var startNextController = function startNextController() {\n          var controller = controllers.shift();\n\n          if (controller) {\n            controller.start(function (error) {\n              if (error) {\n                callback(error);\n\n                _this.dispatch(\"end\");\n              } else {\n                startNextController();\n              }\n            });\n          } else {\n            callback();\n\n            _this.dispatch(\"end\");\n          }\n        };\n\n        this.dispatch(\"start\");\n        startNextController();\n      }\n    }, {\n      key: \"createDirectUploadControllers\",\n      value: function createDirectUploadControllers() {\n        var controllers = [];\n        this.inputs.forEach(function (input) {\n          toArray$1(input.files).forEach(function (file) {\n            var controller = new DirectUploadController(input, file);\n            controllers.push(controller);\n          });\n        });\n        return controllers;\n      }\n    }, {\n      key: \"dispatch\",\n      value: function dispatch(name) {\n        var detail = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return dispatchEvent(this.form, \"direct-uploads:\" + name, {\n          detail: detail\n        });\n      }\n    }]);\n    return DirectUploadsController;\n  }();\n\n  var processingAttribute = \"data-direct-uploads-processing\";\n  var submitButtonsByForm = new WeakMap();\n  var started = false;\n\n  function start() {\n    if (!started) {\n      started = true;\n      document.addEventListener(\"click\", didClick, true);\n      document.addEventListener(\"submit\", didSubmitForm);\n      document.addEventListener(\"ajax:before\", didSubmitRemoteElement);\n    }\n  }\n\n  function didClick(event) {\n    var target = event.target;\n\n    if ((target.tagName == \"INPUT\" || target.tagName == \"BUTTON\") && target.type == \"submit\" && target.form) {\n      submitButtonsByForm.set(target.form, target);\n    }\n  }\n\n  function didSubmitForm(event) {\n    handleFormSubmissionEvent(event);\n  }\n\n  function didSubmitRemoteElement(event) {\n    if (event.target.tagName == \"FORM\") {\n      handleFormSubmissionEvent(event);\n    }\n  }\n\n  function handleFormSubmissionEvent(event) {\n    var form = event.target;\n\n    if (form.hasAttribute(processingAttribute)) {\n      event.preventDefault();\n      return;\n    }\n\n    var controller = new DirectUploadsController(form);\n    var inputs = controller.inputs;\n\n    if (inputs.length) {\n      event.preventDefault();\n      form.setAttribute(processingAttribute, \"\");\n      inputs.forEach(disable);\n      controller.start(function (error) {\n        form.removeAttribute(processingAttribute);\n\n        if (error) {\n          inputs.forEach(enable);\n        } else {\n          submitForm(form);\n        }\n      });\n    }\n  }\n\n  function submitForm(form) {\n    var button = submitButtonsByForm.get(form) || findElement(form, \"input[type=submit], button[type=submit]\");\n\n    if (button) {\n      var _button = button,\n          disabled = _button.disabled;\n      button.disabled = false;\n      button.focus();\n      button.click();\n      button.disabled = disabled;\n    } else {\n      button = document.createElement(\"input\");\n      button.type = \"submit\";\n      button.style.display = \"none\";\n      form.appendChild(button);\n      button.click();\n      form.removeChild(button);\n    }\n\n    submitButtonsByForm.delete(form);\n  }\n\n  function disable(input) {\n    input.disabled = true;\n  }\n\n  function enable(input) {\n    input.disabled = false;\n  }\n\n  function autostart() {\n    if (window.ActiveStorage) {\n      start();\n    }\n  }\n\n  setTimeout(autostart, 1);\n  exports.start = start;\n  exports.DirectUpload = DirectUpload;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n});","map":{"version":3,"names":["global","factory","exports","module","define","amd","ActiveStorage","createCommonjsModule","fn","sparkMd5","undefined","hex_chr","md5cycle","x","k","a","b","c","d","md5blk","s","md5blks","i","charCodeAt","md5blk_array","md51","n","length","state","tail","tmp","lo","hi","substring","toString","match","parseInt","md51_array","subarray","Uint8Array","rhex","j","hex","join","ArrayBuffer","prototype","slice","clamp","val","Math","max","min","from","to","byteLength","begin","end","num","target","targetArray","sourceArray","set","toUtf8","str","test","unescape","encodeURIComponent","utf8Str2ArrayBuffer","returnUInt8Array","buff","arr","arrayBuffer2Utf8Str","String","fromCharCode","apply","concatenateArrayBuffers","first","second","result","buffer","hexToBinaryString","bytes","push","substr","SparkMD5","reset","append","appendBinary","contents","_buff","_length","_hash","raw","ret","_finish","getState","hash","setState","destroy","hashBinary","content","call","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","fileSlice","File","mozSlice","webkitSlice","FileChecksum","value","create","file","callback","chunkSize","chunkCount","ceil","size","chunkIndex","_this","md5Buffer","fileReader","FileReader","addEventListener","event","fileReaderDidLoad","fileReaderDidError","readNextChunk","binaryDigest","base64digest","btoa","name","start","readAsArrayBuffer","getMetaValue","element","findElement","document","head","getAttribute","findElements","root","selector","elements","querySelectorAll","toArray$1","querySelector","dispatchEvent","type","eventInit","arguments","disabled","bubbles","cancelable","detail","createEvent","initEvent","Array","isArray","BlobRecord","checksum","url","attributes","filename","content_type","byte_size","xhr","XMLHttpRequest","open","responseType","setRequestHeader","requestDidLoad","requestDidError","send","JSON","stringify","blob","status","response","direct_upload","directUploadData","toJSON","get","get$$1","_xhr","parse","BlobUpload","_blob$directUploadDat","headers","id","DirectUpload","delegate","error","notify","upload","object","methodName","_len","messages","_key","DirectUploadController","input","directUpload","dispatch","hiddenInput","createElement","insertAdjacentElement","parentNode","removeChild","dispatchError","signed_id","uploadRequestDidProgress","progress","loaded","total","defaultPrevented","alert","directUploadWillCreateBlobWithXHR","directUploadWillStoreFileWithXHR","_this2","inputSelector","DirectUploadsController","form","inputs","filter","files","controllers","createDirectUploadControllers","startNextController","controller","shift","forEach","processingAttribute","submitButtonsByForm","WeakMap","started","didClick","didSubmitForm","didSubmitRemoteElement","tagName","handleFormSubmissionEvent","hasAttribute","preventDefault","setAttribute","disable","removeAttribute","enable","submitForm","button","_button","focus","click","style","display","appendChild","delete","autostart","window","setTimeout"],"sources":["C:/Users/acapo/Desktop/Programacion Avanzada/Proyecto final - Truco/CardGame_Front-End/node_modules/activestorage/app/assets/javascripts/activestorage.js"],"sourcesContent":["(function(global, factory) {\n  typeof exports === \"object\" && typeof module !== \"undefined\" ? factory(exports) : typeof define === \"function\" && define.amd ? define([ \"exports\" ], factory) : factory(global.ActiveStorage = {});\n})(this, function(exports) {\n  \"use strict\";\n  function createCommonjsModule(fn, module) {\n    return module = {\n      exports: {}\n    }, fn(module, module.exports), module.exports;\n  }\n  var sparkMd5 = createCommonjsModule(function(module, exports) {\n    (function(factory) {\n      {\n        module.exports = factory();\n      }\n    })(function(undefined) {\n      var hex_chr = [ \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\" ];\n      function md5cycle(x, k) {\n        var a = x[0], b = x[1], c = x[2], d = x[3];\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n      }\n      function md5blk(s) {\n        var md5blks = [], i;\n        for (i = 0; i < 64; i += 4) {\n          md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n      }\n      function md5blk_array(a) {\n        var md5blks = [], i;\n        for (i = 0; i < 64; i += 4) {\n          md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n      }\n      function md51(s) {\n        var n = s.length, state = [ 1732584193, -271733879, -1732584194, 271733878 ], i, length, tail, tmp, lo, hi;\n        for (i = 64; i <= n; i += 64) {\n          md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= s.charCodeAt(i) << (i % 4 << 3);\n        }\n        tail[i >> 2] |= 128 << (i % 4 << 3);\n        if (i > 55) {\n          md5cycle(state, tail);\n          for (i = 0; i < 16; i += 1) {\n            tail[i] = 0;\n          }\n        }\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(state, tail);\n        return state;\n      }\n      function md51_array(a) {\n        var n = a.length, state = [ 1732584193, -271733879, -1732584194, 271733878 ], i, length, tail, tmp, lo, hi;\n        for (i = 64; i <= n; i += 64) {\n          md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n        a = i - 64 < n ? a.subarray(i - 64) : new Uint8Array(0);\n        length = a.length;\n        tail = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= a[i] << (i % 4 << 3);\n        }\n        tail[i >> 2] |= 128 << (i % 4 << 3);\n        if (i > 55) {\n          md5cycle(state, tail);\n          for (i = 0; i < 16; i += 1) {\n            tail[i] = 0;\n          }\n        }\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(state, tail);\n        return state;\n      }\n      function rhex(n) {\n        var s = \"\", j;\n        for (j = 0; j < 4; j += 1) {\n          s += hex_chr[n >> j * 8 + 4 & 15] + hex_chr[n >> j * 8 & 15];\n        }\n        return s;\n      }\n      function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n          x[i] = rhex(x[i]);\n        }\n        return x.join(\"\");\n      }\n      if (hex(md51(\"hello\")) !== \"5d41402abc4b2a76b9719d911017c592\") ;\n      if (typeof ArrayBuffer !== \"undefined\" && !ArrayBuffer.prototype.slice) {\n        (function() {\n          function clamp(val, length) {\n            val = val | 0 || 0;\n            if (val < 0) {\n              return Math.max(val + length, 0);\n            }\n            return Math.min(val, length);\n          }\n          ArrayBuffer.prototype.slice = function(from, to) {\n            var length = this.byteLength, begin = clamp(from, length), end = length, num, target, targetArray, sourceArray;\n            if (to !== undefined) {\n              end = clamp(to, length);\n            }\n            if (begin > end) {\n              return new ArrayBuffer(0);\n            }\n            num = end - begin;\n            target = new ArrayBuffer(num);\n            targetArray = new Uint8Array(target);\n            sourceArray = new Uint8Array(this, begin, num);\n            targetArray.set(sourceArray);\n            return target;\n          };\n        })();\n      }\n      function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n          str = unescape(encodeURIComponent(str));\n        }\n        return str;\n      }\n      function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length, buff = new ArrayBuffer(length), arr = new Uint8Array(buff), i;\n        for (i = 0; i < length; i += 1) {\n          arr[i] = str.charCodeAt(i);\n        }\n        return returnUInt8Array ? arr : buff;\n      }\n      function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n      }\n      function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n        return returnUInt8Array ? result : result.buffer;\n      }\n      function hexToBinaryString(hex) {\n        var bytes = [], length = hex.length, x;\n        for (x = 0; x < length - 1; x += 2) {\n          bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n        return String.fromCharCode.apply(String, bytes);\n      }\n      function SparkMD5() {\n        this.reset();\n      }\n      SparkMD5.prototype.append = function(str) {\n        this.appendBinary(toUtf8(str));\n        return this;\n      };\n      SparkMD5.prototype.appendBinary = function(contents) {\n        this._buff += contents;\n        this._length += contents.length;\n        var length = this._buff.length, i;\n        for (i = 64; i <= length; i += 64) {\n          md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n        this._buff = this._buff.substring(i - 64);\n        return this;\n      };\n      SparkMD5.prototype.end = function(raw) {\n        var buff = this._buff, length = buff.length, i, tail = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ], ret;\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= buff.charCodeAt(i) << (i % 4 << 3);\n        }\n        this._finish(tail, length);\n        ret = hex(this._hash);\n        if (raw) {\n          ret = hexToBinaryString(ret);\n        }\n        this.reset();\n        return ret;\n      };\n      SparkMD5.prototype.reset = function() {\n        this._buff = \"\";\n        this._length = 0;\n        this._hash = [ 1732584193, -271733879, -1732584194, 271733878 ];\n        return this;\n      };\n      SparkMD5.prototype.getState = function() {\n        return {\n          buff: this._buff,\n          length: this._length,\n          hash: this._hash\n        };\n      };\n      SparkMD5.prototype.setState = function(state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n        return this;\n      };\n      SparkMD5.prototype.destroy = function() {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n      };\n      SparkMD5.prototype._finish = function(tail, length) {\n        var i = length, tmp, lo, hi;\n        tail[i >> 2] |= 128 << (i % 4 << 3);\n        if (i > 55) {\n          md5cycle(this._hash, tail);\n          for (i = 0; i < 16; i += 1) {\n            tail[i] = 0;\n          }\n        }\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n      };\n      SparkMD5.hash = function(str, raw) {\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n      };\n      SparkMD5.hashBinary = function(content, raw) {\n        var hash = md51(content), ret = hex(hash);\n        return raw ? hexToBinaryString(ret) : ret;\n      };\n      SparkMD5.ArrayBuffer = function() {\n        this.reset();\n      };\n      SparkMD5.ArrayBuffer.prototype.append = function(arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true), length = buff.length, i;\n        this._length += arr.byteLength;\n        for (i = 64; i <= length; i += 64) {\n          md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n        this._buff = i - 64 < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n        return this;\n      };\n      SparkMD5.ArrayBuffer.prototype.end = function(raw) {\n        var buff = this._buff, length = buff.length, tail = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ], i, ret;\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= buff[i] << (i % 4 << 3);\n        }\n        this._finish(tail, length);\n        ret = hex(this._hash);\n        if (raw) {\n          ret = hexToBinaryString(ret);\n        }\n        this.reset();\n        return ret;\n      };\n      SparkMD5.ArrayBuffer.prototype.reset = function() {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [ 1732584193, -271733879, -1732584194, 271733878 ];\n        return this;\n      };\n      SparkMD5.ArrayBuffer.prototype.getState = function() {\n        var state = SparkMD5.prototype.getState.call(this);\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n        return state;\n      };\n      SparkMD5.ArrayBuffer.prototype.setState = function(state) {\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n        return SparkMD5.prototype.setState.call(this, state);\n      };\n      SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n      SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n      SparkMD5.ArrayBuffer.hash = function(arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)), ret = hex(hash);\n        return raw ? hexToBinaryString(ret) : ret;\n      };\n      return SparkMD5;\n    });\n  });\n  var classCallCheck = function(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n  var createClass = function() {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n    return function(Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n  var fileSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice;\n  var FileChecksum = function() {\n    createClass(FileChecksum, null, [ {\n      key: \"create\",\n      value: function create(file, callback) {\n        var instance = new FileChecksum(file);\n        instance.create(callback);\n      }\n    } ]);\n    function FileChecksum(file) {\n      classCallCheck(this, FileChecksum);\n      this.file = file;\n      this.chunkSize = 2097152;\n      this.chunkCount = Math.ceil(this.file.size / this.chunkSize);\n      this.chunkIndex = 0;\n    }\n    createClass(FileChecksum, [ {\n      key: \"create\",\n      value: function create(callback) {\n        var _this = this;\n        this.callback = callback;\n        this.md5Buffer = new sparkMd5.ArrayBuffer();\n        this.fileReader = new FileReader();\n        this.fileReader.addEventListener(\"load\", function(event) {\n          return _this.fileReaderDidLoad(event);\n        });\n        this.fileReader.addEventListener(\"error\", function(event) {\n          return _this.fileReaderDidError(event);\n        });\n        this.readNextChunk();\n      }\n    }, {\n      key: \"fileReaderDidLoad\",\n      value: function fileReaderDidLoad(event) {\n        this.md5Buffer.append(event.target.result);\n        if (!this.readNextChunk()) {\n          var binaryDigest = this.md5Buffer.end(true);\n          var base64digest = btoa(binaryDigest);\n          this.callback(null, base64digest);\n        }\n      }\n    }, {\n      key: \"fileReaderDidError\",\n      value: function fileReaderDidError(event) {\n        this.callback(\"Error reading \" + this.file.name);\n      }\n    }, {\n      key: \"readNextChunk\",\n      value: function readNextChunk() {\n        if (this.chunkIndex < this.chunkCount || this.chunkIndex == 0 && this.chunkCount == 0) {\n          var start = this.chunkIndex * this.chunkSize;\n          var end = Math.min(start + this.chunkSize, this.file.size);\n          var bytes = fileSlice.call(this.file, start, end);\n          this.fileReader.readAsArrayBuffer(bytes);\n          this.chunkIndex++;\n          return true;\n        } else {\n          return false;\n        }\n      }\n    } ]);\n    return FileChecksum;\n  }();\n  function getMetaValue(name) {\n    var element = findElement(document.head, 'meta[name=\"' + name + '\"]');\n    if (element) {\n      return element.getAttribute(\"content\");\n    }\n  }\n  function findElements(root, selector) {\n    if (typeof root == \"string\") {\n      selector = root;\n      root = document;\n    }\n    var elements = root.querySelectorAll(selector);\n    return toArray$1(elements);\n  }\n  function findElement(root, selector) {\n    if (typeof root == \"string\") {\n      selector = root;\n      root = document;\n    }\n    return root.querySelector(selector);\n  }\n  function dispatchEvent(element, type) {\n    var eventInit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var disabled = element.disabled;\n    var bubbles = eventInit.bubbles, cancelable = eventInit.cancelable, detail = eventInit.detail;\n    var event = document.createEvent(\"Event\");\n    event.initEvent(type, bubbles || true, cancelable || true);\n    event.detail = detail || {};\n    try {\n      element.disabled = false;\n      element.dispatchEvent(event);\n    } finally {\n      element.disabled = disabled;\n    }\n    return event;\n  }\n  function toArray$1(value) {\n    if (Array.isArray(value)) {\n      return value;\n    } else if (Array.from) {\n      return Array.from(value);\n    } else {\n      return [].slice.call(value);\n    }\n  }\n  var BlobRecord = function() {\n    function BlobRecord(file, checksum, url) {\n      var _this = this;\n      classCallCheck(this, BlobRecord);\n      this.file = file;\n      this.attributes = {\n        filename: file.name,\n        content_type: file.type,\n        byte_size: file.size,\n        checksum: checksum\n      };\n      this.xhr = new XMLHttpRequest();\n      this.xhr.open(\"POST\", url, true);\n      this.xhr.responseType = \"json\";\n      this.xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n      this.xhr.setRequestHeader(\"Accept\", \"application/json\");\n      this.xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n      this.xhr.setRequestHeader(\"X-CSRF-Token\", getMetaValue(\"csrf-token\"));\n      this.xhr.addEventListener(\"load\", function(event) {\n        return _this.requestDidLoad(event);\n      });\n      this.xhr.addEventListener(\"error\", function(event) {\n        return _this.requestDidError(event);\n      });\n    }\n    createClass(BlobRecord, [ {\n      key: \"create\",\n      value: function create(callback) {\n        this.callback = callback;\n        this.xhr.send(JSON.stringify({\n          blob: this.attributes\n        }));\n      }\n    }, {\n      key: \"requestDidLoad\",\n      value: function requestDidLoad(event) {\n        if (this.status >= 200 && this.status < 300) {\n          var response = this.response;\n          var direct_upload = response.direct_upload;\n          delete response.direct_upload;\n          this.attributes = response;\n          this.directUploadData = direct_upload;\n          this.callback(null, this.toJSON());\n        } else {\n          this.requestDidError(event);\n        }\n      }\n    }, {\n      key: \"requestDidError\",\n      value: function requestDidError(event) {\n        this.callback('Error creating Blob for \"' + this.file.name + '\". Status: ' + this.status);\n      }\n    }, {\n      key: \"toJSON\",\n      value: function toJSON() {\n        var result = {};\n        for (var key in this.attributes) {\n          result[key] = this.attributes[key];\n        }\n        return result;\n      }\n    }, {\n      key: \"status\",\n      get: function get$$1() {\n        return this.xhr.status;\n      }\n    }, {\n      key: \"response\",\n      get: function get$$1() {\n        var _xhr = this.xhr, responseType = _xhr.responseType, response = _xhr.response;\n        if (responseType == \"json\") {\n          return response;\n        } else {\n          return JSON.parse(response);\n        }\n      }\n    } ]);\n    return BlobRecord;\n  }();\n  var BlobUpload = function() {\n    function BlobUpload(blob) {\n      var _this = this;\n      classCallCheck(this, BlobUpload);\n      this.blob = blob;\n      this.file = blob.file;\n      var _blob$directUploadDat = blob.directUploadData, url = _blob$directUploadDat.url, headers = _blob$directUploadDat.headers;\n      this.xhr = new XMLHttpRequest();\n      this.xhr.open(\"PUT\", url, true);\n      this.xhr.responseType = \"text\";\n      for (var key in headers) {\n        this.xhr.setRequestHeader(key, headers[key]);\n      }\n      this.xhr.addEventListener(\"load\", function(event) {\n        return _this.requestDidLoad(event);\n      });\n      this.xhr.addEventListener(\"error\", function(event) {\n        return _this.requestDidError(event);\n      });\n    }\n    createClass(BlobUpload, [ {\n      key: \"create\",\n      value: function create(callback) {\n        this.callback = callback;\n        this.xhr.send(this.file.slice());\n      }\n    }, {\n      key: \"requestDidLoad\",\n      value: function requestDidLoad(event) {\n        var _xhr = this.xhr, status = _xhr.status, response = _xhr.response;\n        if (status >= 200 && status < 300) {\n          this.callback(null, response);\n        } else {\n          this.requestDidError(event);\n        }\n      }\n    }, {\n      key: \"requestDidError\",\n      value: function requestDidError(event) {\n        this.callback('Error storing \"' + this.file.name + '\". Status: ' + this.xhr.status);\n      }\n    } ]);\n    return BlobUpload;\n  }();\n  var id = 0;\n  var DirectUpload = function() {\n    function DirectUpload(file, url, delegate) {\n      classCallCheck(this, DirectUpload);\n      this.id = ++id;\n      this.file = file;\n      this.url = url;\n      this.delegate = delegate;\n    }\n    createClass(DirectUpload, [ {\n      key: \"create\",\n      value: function create(callback) {\n        var _this = this;\n        FileChecksum.create(this.file, function(error, checksum) {\n          if (error) {\n            callback(error);\n            return;\n          }\n          var blob = new BlobRecord(_this.file, checksum, _this.url);\n          notify(_this.delegate, \"directUploadWillCreateBlobWithXHR\", blob.xhr);\n          blob.create(function(error) {\n            if (error) {\n              callback(error);\n            } else {\n              var upload = new BlobUpload(blob);\n              notify(_this.delegate, \"directUploadWillStoreFileWithXHR\", upload.xhr);\n              upload.create(function(error) {\n                if (error) {\n                  callback(error);\n                } else {\n                  callback(null, blob.toJSON());\n                }\n              });\n            }\n          });\n        });\n      }\n    } ]);\n    return DirectUpload;\n  }();\n  function notify(object, methodName) {\n    if (object && typeof object[methodName] == \"function\") {\n      for (var _len = arguments.length, messages = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        messages[_key - 2] = arguments[_key];\n      }\n      return object[methodName].apply(object, messages);\n    }\n  }\n  var DirectUploadController = function() {\n    function DirectUploadController(input, file) {\n      classCallCheck(this, DirectUploadController);\n      this.input = input;\n      this.file = file;\n      this.directUpload = new DirectUpload(this.file, this.url, this);\n      this.dispatch(\"initialize\");\n    }\n    createClass(DirectUploadController, [ {\n      key: \"start\",\n      value: function start(callback) {\n        var _this = this;\n        var hiddenInput = document.createElement(\"input\");\n        hiddenInput.type = \"hidden\";\n        hiddenInput.name = this.input.name;\n        this.input.insertAdjacentElement(\"beforebegin\", hiddenInput);\n        this.dispatch(\"start\");\n        this.directUpload.create(function(error, attributes) {\n          if (error) {\n            hiddenInput.parentNode.removeChild(hiddenInput);\n            _this.dispatchError(error);\n          } else {\n            hiddenInput.value = attributes.signed_id;\n          }\n          _this.dispatch(\"end\");\n          callback(error);\n        });\n      }\n    }, {\n      key: \"uploadRequestDidProgress\",\n      value: function uploadRequestDidProgress(event) {\n        var progress = event.loaded / event.total * 100;\n        if (progress) {\n          this.dispatch(\"progress\", {\n            progress: progress\n          });\n        }\n      }\n    }, {\n      key: \"dispatch\",\n      value: function dispatch(name) {\n        var detail = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        detail.file = this.file;\n        detail.id = this.directUpload.id;\n        return dispatchEvent(this.input, \"direct-upload:\" + name, {\n          detail: detail\n        });\n      }\n    }, {\n      key: \"dispatchError\",\n      value: function dispatchError(error) {\n        var event = this.dispatch(\"error\", {\n          error: error\n        });\n        if (!event.defaultPrevented) {\n          alert(error);\n        }\n      }\n    }, {\n      key: \"directUploadWillCreateBlobWithXHR\",\n      value: function directUploadWillCreateBlobWithXHR(xhr) {\n        this.dispatch(\"before-blob-request\", {\n          xhr: xhr\n        });\n      }\n    }, {\n      key: \"directUploadWillStoreFileWithXHR\",\n      value: function directUploadWillStoreFileWithXHR(xhr) {\n        var _this2 = this;\n        this.dispatch(\"before-storage-request\", {\n          xhr: xhr\n        });\n        xhr.upload.addEventListener(\"progress\", function(event) {\n          return _this2.uploadRequestDidProgress(event);\n        });\n      }\n    }, {\n      key: \"url\",\n      get: function get$$1() {\n        return this.input.getAttribute(\"data-direct-upload-url\");\n      }\n    } ]);\n    return DirectUploadController;\n  }();\n  var inputSelector = \"input[type=file][data-direct-upload-url]:not([disabled])\";\n  var DirectUploadsController = function() {\n    function DirectUploadsController(form) {\n      classCallCheck(this, DirectUploadsController);\n      this.form = form;\n      this.inputs = findElements(form, inputSelector).filter(function(input) {\n        return input.files.length;\n      });\n    }\n    createClass(DirectUploadsController, [ {\n      key: \"start\",\n      value: function start(callback) {\n        var _this = this;\n        var controllers = this.createDirectUploadControllers();\n        var startNextController = function startNextController() {\n          var controller = controllers.shift();\n          if (controller) {\n            controller.start(function(error) {\n              if (error) {\n                callback(error);\n                _this.dispatch(\"end\");\n              } else {\n                startNextController();\n              }\n            });\n          } else {\n            callback();\n            _this.dispatch(\"end\");\n          }\n        };\n        this.dispatch(\"start\");\n        startNextController();\n      }\n    }, {\n      key: \"createDirectUploadControllers\",\n      value: function createDirectUploadControllers() {\n        var controllers = [];\n        this.inputs.forEach(function(input) {\n          toArray$1(input.files).forEach(function(file) {\n            var controller = new DirectUploadController(input, file);\n            controllers.push(controller);\n          });\n        });\n        return controllers;\n      }\n    }, {\n      key: \"dispatch\",\n      value: function dispatch(name) {\n        var detail = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return dispatchEvent(this.form, \"direct-uploads:\" + name, {\n          detail: detail\n        });\n      }\n    } ]);\n    return DirectUploadsController;\n  }();\n  var processingAttribute = \"data-direct-uploads-processing\";\n  var submitButtonsByForm = new WeakMap();\n  var started = false;\n  function start() {\n    if (!started) {\n      started = true;\n      document.addEventListener(\"click\", didClick, true);\n      document.addEventListener(\"submit\", didSubmitForm);\n      document.addEventListener(\"ajax:before\", didSubmitRemoteElement);\n    }\n  }\n  function didClick(event) {\n    var target = event.target;\n    if ((target.tagName == \"INPUT\" || target.tagName == \"BUTTON\") && target.type == \"submit\" && target.form) {\n      submitButtonsByForm.set(target.form, target);\n    }\n  }\n  function didSubmitForm(event) {\n    handleFormSubmissionEvent(event);\n  }\n  function didSubmitRemoteElement(event) {\n    if (event.target.tagName == \"FORM\") {\n      handleFormSubmissionEvent(event);\n    }\n  }\n  function handleFormSubmissionEvent(event) {\n    var form = event.target;\n    if (form.hasAttribute(processingAttribute)) {\n      event.preventDefault();\n      return;\n    }\n    var controller = new DirectUploadsController(form);\n    var inputs = controller.inputs;\n    if (inputs.length) {\n      event.preventDefault();\n      form.setAttribute(processingAttribute, \"\");\n      inputs.forEach(disable);\n      controller.start(function(error) {\n        form.removeAttribute(processingAttribute);\n        if (error) {\n          inputs.forEach(enable);\n        } else {\n          submitForm(form);\n        }\n      });\n    }\n  }\n  function submitForm(form) {\n    var button = submitButtonsByForm.get(form) || findElement(form, \"input[type=submit], button[type=submit]\");\n    if (button) {\n      var _button = button, disabled = _button.disabled;\n      button.disabled = false;\n      button.focus();\n      button.click();\n      button.disabled = disabled;\n    } else {\n      button = document.createElement(\"input\");\n      button.type = \"submit\";\n      button.style.display = \"none\";\n      form.appendChild(button);\n      button.click();\n      form.removeChild(button);\n    }\n    submitButtonsByForm.delete(form);\n  }\n  function disable(input) {\n    input.disabled = true;\n  }\n  function enable(input) {\n    input.disabled = false;\n  }\n  function autostart() {\n    if (window.ActiveStorage) {\n      start();\n    }\n  }\n  setTimeout(autostart, 1);\n  exports.start = start;\n  exports.DirectUpload = DirectUpload;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}